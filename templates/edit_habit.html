<!DOCTYPE html>
<html>
<head>
    <title>Edit Habit</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body {% if dark_mode %}data-theme="dark"{% endif %}>
    
    <div class="header">
        <div class="header-content">
            <h1>Edit: {{ habit.name }}</h1>
            <div class="nav-buttons">
                <a href="{{ url_for('view_habit', habit_id=habit.id) }}" class="btn btn-secondary">‚Üê Cancel</a>
                <a href="{{ url_for('toggle_dark_mode') }}" class="dark-mode-toggle">
                    {% if dark_mode %}‚òÄÔ∏è{% else %}üåô{% endif %}
                </a>
            </div>
        </div>
    </div>
    
    <div class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="messages">
                    {% for category, message in messages %}
                        <div class="message {{ category }}">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        
        <div class="card">
            <form method="POST" action="{{ url_for('edit_habit', habit_id=habit.id) }}">
                <div class="form-group">
                    <label>Habit Name: *</label>
                    <input type="text" name="name" class="form-control" required value="{{ habit.name }}">
                </div>
                
                <div class="form-group">
                    <label>Icon (emoji):</label>
                    <input type="text" name="icon" class="form-control" value="{{ habit.icon or '' }}">
                </div>
                
                <div class="form-group">
                    <label>Frequency: *</label>
                    <select name="frequency" class="form-control" required>
                        <option value="daily" {% if habit.frequency == 'daily' %}selected{% endif %}>Daily</option>
                        <option value="weekly" {% if habit.frequency == 'weekly' %}selected{% endif %}>Weekly</option>
                        <option value="custom" {% if habit.frequency == 'custom' %}selected{% endif %}>Custom</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Target Time:</label>
                    <input type="time" name="target_time" class="form-control" value="{{ habit.target_time or '' }}">
                </div>
                
                <div class="form-group">
                    <label>Why This Matters to Me:</label>
                    <textarea name="motivation" class="form-control">{{ habit.motivation or '' }}</textarea>
                </div>
                
                <div class="form-group">
                    <label>Expected Challenges:</label>
                    <textarea name="challenges" class="form-control">{{ habit.challenges or '' }}</textarea>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button type="submit" class="btn btn-success btn-large">Save Changes</button>
                    <a href="{{ url_for('view_habit', habit_id=habit.id) }}" class="btn btn-secondary btn-large">Cancel</a>
                </div>
            </form>
        </div>
    </div>
    
</body>
</html>